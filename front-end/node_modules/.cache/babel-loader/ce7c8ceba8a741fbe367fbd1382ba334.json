{"ast":null,"code":"import axios from \"axios\";\nimport { ADD_EATEN_MEAL, REMOVE_EATEN_MEAL } from \"../components/actionTypes\";\nconst API_URL = \"http://localhost:5000\"; // adds eaten meal to database as well as redux state for a given date\n// by dispatching action created by addedEatenMeal()\n\nexport const addEatenMeal = (username, recipeId, date, nutrients) => {\n  return async dispatch => {\n    try {\n      const macros = {\n        calories: Math.round(nutrients[0].amount),\n        fat: Math.round(nutrients[1].amount),\n        carbs: Math.round(nutrients[3].amount),\n        protein: Math.round(nutrients[8].amount)\n      };\n      await axios.post(`${API_URL}/users/addEatenMeal`, {\n        username,\n        recipeId,\n        date,\n        nutrients: macros\n      });\n      dispatch(addedEatenMeal(recipeId, date, macros));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n}; // returns action to be dispatched containing id of recipe\n// to be eaten and date that it was eaten\n\nconst addedEatenMeal = (recipeId, date, nutrients) => {\n  const {\n    calories,\n    fat,\n    carbs,\n    protein\n  } = nutrients;\n  return {\n    type: ADD_EATEN_MEAL,\n    payload: {\n      date,\n      meal: {\n        id: recipeId,\n        calories,\n        fat,\n        carbs,\n        protein\n      }\n    }\n  };\n}; // removes eaten meal from database as well as redux state for a given date\n// by dispatching action created by removedEatenMeal()\n\n\nexport const removeEatenMeal = (username, recipeId, date) => {\n  return async dispatch => {\n    try {\n      await axios.post(`${API_URL}/users/removeEatenMeal`, {\n        username,\n        recipeId,\n        date\n      });\n      dispatch(removedEatenMeal(recipeId, date));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n}; // returns action to be dispatched containing id of recipe\n// to be removed and date that it was eaten\n\nconst removedEatenMeal = (recipeId, date) => {\n  return {\n    type: REMOVE_EATEN_MEAL,\n    payload: {\n      recipeId,\n      date\n    }\n  };\n};","map":{"version":3,"sources":["/Users/briand.shapiro/Desktop/Springboard/capstone2/front-end/src/actionCreators/trackerActionCreators.js"],"names":["axios","ADD_EATEN_MEAL","REMOVE_EATEN_MEAL","API_URL","addEatenMeal","username","recipeId","date","nutrients","dispatch","macros","calories","Math","round","amount","fat","carbs","protein","post","addedEatenMeal","e","console","error","type","payload","meal","id","removeEatenMeal","removedEatenMeal"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,EAAyBC,iBAAzB,QAAkD,2BAAlD;AAEA,MAAMC,OAAO,GAAG,uBAAhB,C,CAEA;AACA;;AACA,OAAO,MAAMC,YAAY,GAAG,CAACC,QAAD,EAAWC,QAAX,EAAqBC,IAArB,EAA2BC,SAA3B,KAAyC;AACpE,SAAO,MAAOC,QAAP,IAAoB;AAC1B,QAAI;AACH,YAAMC,MAAM,GAAG;AACdC,QAAAA,QAAQ,EAAEC,IAAI,CAACC,KAAL,CAAWL,SAAS,CAAC,CAAD,CAAT,CAAaM,MAAxB,CADI;AAEdC,QAAAA,GAAG,EAAEH,IAAI,CAACC,KAAL,CAAWL,SAAS,CAAC,CAAD,CAAT,CAAaM,MAAxB,CAFS;AAGdE,QAAAA,KAAK,EAAEJ,IAAI,CAACC,KAAL,CAAWL,SAAS,CAAC,CAAD,CAAT,CAAaM,MAAxB,CAHO;AAIdG,QAAAA,OAAO,EAAEL,IAAI,CAACC,KAAL,CAAWL,SAAS,CAAC,CAAD,CAAT,CAAaM,MAAxB;AAJK,OAAf;AAMA,YAAMd,KAAK,CAACkB,IAAN,CAAY,GAAEf,OAAQ,qBAAtB,EAA4C;AACjDE,QAAAA,QADiD;AAEjDC,QAAAA,QAFiD;AAGjDC,QAAAA,IAHiD;AAIjDC,QAAAA,SAAS,EAAEE;AAJsC,OAA5C,CAAN;AAMAD,MAAAA,QAAQ,CAACU,cAAc,CAACb,QAAD,EAAWC,IAAX,EAAiBG,MAAjB,CAAf,CAAR;AACA,KAdD,CAcE,OAAOU,CAAP,EAAU;AACXC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACA;AACD,GAlBD;AAmBA,CApBM,C,CAsBP;AACA;;AACA,MAAMD,cAAc,GAAG,CAACb,QAAD,EAAWC,IAAX,EAAiBC,SAAjB,KAA+B;AACrD,QAAM;AAAEG,IAAAA,QAAF;AAAYI,IAAAA,GAAZ;AAAiBC,IAAAA,KAAjB;AAAwBC,IAAAA;AAAxB,MAAoCT,SAA1C;AACA,SAAO;AACNe,IAAAA,IAAI,EAAEtB,cADA;AAENuB,IAAAA,OAAO,EAAE;AACRjB,MAAAA,IADQ;AAERkB,MAAAA,IAAI,EAAE;AACLC,QAAAA,EAAE,EAAEpB,QADC;AAELK,QAAAA,QAFK;AAGLI,QAAAA,GAHK;AAILC,QAAAA,KAJK;AAKLC,QAAAA;AALK;AAFE;AAFH,GAAP;AAaA,CAfD,C,CAiBA;AACA;;;AACA,OAAO,MAAMU,eAAe,GAAG,CAACtB,QAAD,EAAWC,QAAX,EAAqBC,IAArB,KAA8B;AAC5D,SAAO,MAAOE,QAAP,IAAoB;AAC1B,QAAI;AACH,YAAMT,KAAK,CAACkB,IAAN,CAAY,GAAEf,OAAQ,wBAAtB,EAA+C;AACpDE,QAAAA,QADoD;AAEpDC,QAAAA,QAFoD;AAGpDC,QAAAA;AAHoD,OAA/C,CAAN;AAKAE,MAAAA,QAAQ,CAACmB,gBAAgB,CAACtB,QAAD,EAAWC,IAAX,CAAjB,CAAR;AACA,KAPD,CAOE,OAAOa,CAAP,EAAU;AACXC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACA;AACD,GAXD;AAYA,CAbM,C,CAeP;AACA;;AACA,MAAMQ,gBAAgB,GAAG,CAACtB,QAAD,EAAWC,IAAX,KAAoB;AAC5C,SAAO;AACNgB,IAAAA,IAAI,EAAErB,iBADA;AAENsB,IAAAA,OAAO,EAAE;AACRlB,MAAAA,QADQ;AAERC,MAAAA;AAFQ;AAFH,GAAP;AAOA,CARD","sourcesContent":["import axios from \"axios\";\nimport { ADD_EATEN_MEAL, REMOVE_EATEN_MEAL } from \"../components/actionTypes\";\n\nconst API_URL = \"http://localhost:5000\";\n\n// adds eaten meal to database as well as redux state for a given date\n// by dispatching action created by addedEatenMeal()\nexport const addEatenMeal = (username, recipeId, date, nutrients) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst macros = {\n\t\t\t\tcalories: Math.round(nutrients[0].amount),\n\t\t\t\tfat: Math.round(nutrients[1].amount),\n\t\t\t\tcarbs: Math.round(nutrients[3].amount),\n\t\t\t\tprotein: Math.round(nutrients[8].amount),\n\t\t\t};\n\t\t\tawait axios.post(`${API_URL}/users/addEatenMeal`, {\n\t\t\t\tusername,\n\t\t\t\trecipeId,\n\t\t\t\tdate,\n\t\t\t\tnutrients: macros,\n\t\t\t});\n\t\t\tdispatch(addedEatenMeal(recipeId, date, macros));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\n// returns action to be dispatched containing id of recipe\n// to be eaten and date that it was eaten\nconst addedEatenMeal = (recipeId, date, nutrients) => {\n\tconst { calories, fat, carbs, protein } = nutrients;\n\treturn {\n\t\ttype: ADD_EATEN_MEAL,\n\t\tpayload: {\n\t\t\tdate,\n\t\t\tmeal: {\n\t\t\t\tid: recipeId,\n\t\t\t\tcalories,\n\t\t\t\tfat,\n\t\t\t\tcarbs,\n\t\t\t\tprotein,\n\t\t\t},\n\t\t},\n\t};\n};\n\n// removes eaten meal from database as well as redux state for a given date\n// by dispatching action created by removedEatenMeal()\nexport const removeEatenMeal = (username, recipeId, date) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tawait axios.post(`${API_URL}/users/removeEatenMeal`, {\n\t\t\t\tusername,\n\t\t\t\trecipeId,\n\t\t\t\tdate,\n\t\t\t});\n\t\t\tdispatch(removedEatenMeal(recipeId, date));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\n// returns action to be dispatched containing id of recipe\n// to be removed and date that it was eaten\nconst removedEatenMeal = (recipeId, date) => {\n\treturn {\n\t\ttype: REMOVE_EATEN_MEAL,\n\t\tpayload: {\n\t\t\trecipeId,\n\t\t\tdate,\n\t\t},\n\t};\n};\n"]},"metadata":{},"sourceType":"module"}