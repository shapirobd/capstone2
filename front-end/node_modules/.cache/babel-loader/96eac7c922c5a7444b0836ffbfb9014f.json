{"ast":null,"code":"import axios from \"axios\";\nimport { LOGIN, LOGOUT } from \"../components/actionTypes\";\nconst API_URL = \"http://localhost:5000\";\nexport const register = data => {\n  return async dispatch => {\n    try {\n      const registerResp = await axios.post(`${API_URL}/auth/register`, data);\n      const {\n        token\n      } = registerResp.data;\n      const userResp = await axios.get(`${API_URL}/users/${data.username}`);\n      dispatch(registered(token, userResp.data));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n};\n\nconst registered = (token, user) => {\n  const {\n    username,\n    email,\n    first_name,\n    last_name,\n    api_hash,\n    api_username,\n    bookmarks,\n    weight,\n    weight_goal,\n    calorie_goal\n  } = user;\n  return {\n    type: LOGIN,\n    payload: {\n      token,\n      user: {\n        username,\n        email,\n        first_name,\n        last_name,\n        api_hash,\n        api_username,\n        bookmarks,\n        weight,\n        weight_goal,\n        calorie_goal\n      }\n    }\n  };\n};\n\nexport const login = data => {\n  return async dispatch => {\n    try {\n      console.log(\"login\");\n      const user = await axios.post(`${API_URL}/auth/login`, data);\n      console.log(user);\n      const {\n        api_hash\n      } = user.data;\n      dispatch(loggedIn(api_hash, user.data));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n};\n\nconst loggedIn = (token, user) => {\n  const {\n    username,\n    email,\n    first_name,\n    last_name,\n    api_hash,\n    bookmarks,\n    weight,\n    weight_goal,\n    calorie_goal\n  } = user;\n  return {\n    type: LOGIN,\n    payload: {\n      token,\n      user: {\n        username,\n        email,\n        first_name,\n        last_name,\n        api_hash,\n        bookmarks,\n        eatenMeals,\n        weight,\n        weight_goal,\n        calorie_goal\n      }\n    }\n  };\n};\n\nexport const logout = () => {\n  return {\n    type: LOGOUT\n  };\n};\nexport const editProfile = (username, data) => {\n  return async dispatch => {\n    try {\n      const editResp = await axios.patch(`${API_URL}/users/${username}`, data);\n      dispatch(edittedProfile(editResp.data));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n};\n\nconst edittedProfile = user => {\n  return {\n    type: \"EDIT_PROFILE\",\n    payload: {\n      user\n    }\n  };\n};","map":{"version":3,"sources":["/Users/briand.shapiro/Desktop/Springboard/capstone2/front-end/src/actionCreators/userActionCreators.js"],"names":["axios","LOGIN","LOGOUT","API_URL","register","data","dispatch","registerResp","post","token","userResp","get","username","registered","e","console","error","user","email","first_name","last_name","api_hash","api_username","bookmarks","weight","weight_goal","calorie_goal","type","payload","login","log","loggedIn","eatenMeals","logout","editProfile","editResp","patch","edittedProfile"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { LOGIN, LOGOUT } from \"../components/actionTypes\";\n\nconst API_URL = \"http://localhost:5000\";\n\nexport const register = (data) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst registerResp = await axios.post(`${API_URL}/auth/register`, data);\n\t\t\tconst { token } = registerResp.data;\n\t\t\tconst userResp = await axios.get(`${API_URL}/users/${data.username}`);\n\t\t\tdispatch(registered(token, userResp.data));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\nconst registered = (token, user) => {\n\tconst {\n\t\tusername,\n\t\temail,\n\t\tfirst_name,\n\t\tlast_name,\n\t\tapi_hash,\n\t\tapi_username,\n\t\tbookmarks,\n\t\tweight,\n\t\tweight_goal,\n\t\tcalorie_goal,\n\t} = user;\n\treturn {\n\t\ttype: LOGIN,\n\t\tpayload: {\n\t\t\ttoken,\n\t\t\tuser: {\n\t\t\t\tusername,\n\t\t\t\temail,\n\t\t\t\tfirst_name,\n\t\t\t\tlast_name,\n\t\t\t\tapi_hash,\n\t\t\t\tapi_username,\n\t\t\t\tbookmarks,\n\t\t\t\tweight,\n\t\t\t\tweight_goal,\n\t\t\t\tcalorie_goal,\n\t\t\t},\n\t\t},\n\t};\n};\n\nexport const login = (data) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconsole.log(\"login\");\n\t\t\tconst user = await axios.post(`${API_URL}/auth/login`, data);\n\t\t\tconsole.log(user);\n\t\t\tconst { api_hash } = user.data;\n\t\t\tdispatch(loggedIn(api_hash, user.data));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\nconst loggedIn = (token, user) => {\n\tconst {\n\t\tusername,\n\t\temail,\n\t\tfirst_name,\n\t\tlast_name,\n\t\tapi_hash,\n\t\tbookmarks,\n\t\tweight,\n\t\tweight_goal,\n\t\tcalorie_goal,\n\t} = user;\n\treturn {\n\t\ttype: LOGIN,\n\t\tpayload: {\n\t\t\ttoken,\n\t\t\tuser: {\n\t\t\t\tusername,\n\t\t\t\temail,\n\t\t\t\tfirst_name,\n\t\t\t\tlast_name,\n\t\t\t\tapi_hash,\n\t\t\t\tbookmarks,\n\t\t\t\teatenMeals,\n\t\t\t\tweight,\n\t\t\t\tweight_goal,\n\t\t\t\tcalorie_goal,\n\t\t\t},\n\t\t},\n\t};\n};\n\nexport const logout = () => {\n\treturn {\n\t\ttype: LOGOUT,\n\t};\n};\n\nexport const editProfile = (username, data) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst editResp = await axios.patch(`${API_URL}/users/${username}`, data);\n\t\t\tdispatch(edittedProfile(editResp.data));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\nconst edittedProfile = (user) => {\n\treturn {\n\t\ttype: \"EDIT_PROFILE\",\n\t\tpayload: { user },\n\t};\n};\n"]},"metadata":{},"sourceType":"module"}