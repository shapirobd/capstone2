{"ast":null,"code":"import axios from \"axios\";\nimport { LOGIN, LOGOUT } from \"../components/actionTypes\";\nconst API_URL = \"http://localhost:5000\"; // adds user to database as well as redux state\n// by dispatching action created by registered()\n\nexport const register = data => {\n  return async dispatch => {\n    try {\n      const resp = await axios.post(`${API_URL}/auth/register`, data); // const userResp = await axios.get(`${API_URL}/users/${data.username}`);\n\n      const {\n        user,\n        token\n      } = resp.data;\n      dispatch(registered(token, user));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n}; // returns action to be dispatched containing information on the\n// newly registered user\n\nconst registered = (token, user) => {\n  return {\n    type: LOGIN,\n    payload: {\n      user,\n      token\n    }\n  };\n}; // verifies that username & password from data are valid\n// if valid, adds the user to redux state by dispatching action created by loggedIn()\n// in invalid, throws error\n\n\nexport const login = data => {\n  return async dispatch => {\n    try {\n      const tokenResp = await axios.post(`${API_URL}/auth/login`, data);\n      const userResp = await axios.get(`${API_URL}/users/${data.username}`);\n      dispatch(loggedIn(tokenResp.data.token, userResp.data));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n}; // returns action to be dispatched containing information on the\n// logged in user\n\nconst loggedIn = (token, user) => {\n  return {\n    type: LOGIN,\n    payload: {\n      user,\n      token\n    }\n  };\n}; // returns action to be dispatched that ends up removing\n// the user's information from redux state\n\n\nexport const logout = () => {\n  return {\n    type: LOGOUT\n  };\n}; // edits the information on a given user in the database\n// as well as redux state by dispatching action created by edittedProfile()\n\nexport const editProfile = (username, data) => {\n  return async dispatch => {\n    try {\n      const editResp = await axios.patch(`${API_URL}/users/${username}`, data);\n      dispatch(edittedProfile(editResp.data));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n}; // returns action to be dispatched containing information on the\n// logged in user\n\nconst edittedProfile = user => {\n  return {\n    type: \"EDIT_PROFILE\",\n    payload: {\n      user\n    }\n  };\n};","map":{"version":3,"sources":["/Users/briand.shapiro/Desktop/Springboard/capstone2/front-end/src/actionCreators/userActionCreators.js"],"names":["axios","LOGIN","LOGOUT","API_URL","register","data","dispatch","resp","post","user","token","registered","e","console","error","type","payload","login","tokenResp","userResp","get","username","loggedIn","logout","editProfile","editResp","patch","edittedProfile"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,2BAA9B;AAEA,MAAMC,OAAO,GAAG,uBAAhB,C,CAEA;AACA;;AACA,OAAO,MAAMC,QAAQ,GAAIC,IAAD,IAAU;AACjC,SAAO,MAAOC,QAAP,IAAoB;AAC1B,QAAI;AACH,YAAMC,IAAI,GAAG,MAAMP,KAAK,CAACQ,IAAN,CAAY,GAAEL,OAAQ,gBAAtB,EAAuCE,IAAvC,CAAnB,CADG,CAEH;;AACA,YAAM;AAAEI,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkBH,IAAI,CAACF,IAA7B;AACAC,MAAAA,QAAQ,CAACK,UAAU,CAACD,KAAD,EAAQD,IAAR,CAAX,CAAR;AACA,KALD,CAKE,OAAOG,CAAP,EAAU;AACXC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACA;AACD,GATD;AAUA,CAXM,C,CAaP;AACA;;AACA,MAAMD,UAAU,GAAG,CAACD,KAAD,EAAQD,IAAR,KAAiB;AACnC,SAAO;AACNM,IAAAA,IAAI,EAAEd,KADA;AAENe,IAAAA,OAAO,EAAE;AACRP,MAAAA,IADQ;AAERC,MAAAA;AAFQ;AAFH,GAAP;AAOA,CARD,C,CAUA;AACA;AACA;;;AACA,OAAO,MAAMO,KAAK,GAAIZ,IAAD,IAAU;AAC9B,SAAO,MAAOC,QAAP,IAAoB;AAC1B,QAAI;AACH,YAAMY,SAAS,GAAG,MAAMlB,KAAK,CAACQ,IAAN,CAAY,GAAEL,OAAQ,aAAtB,EAAoCE,IAApC,CAAxB;AACA,YAAMc,QAAQ,GAAG,MAAMnB,KAAK,CAACoB,GAAN,CAAW,GAAEjB,OAAQ,UAASE,IAAI,CAACgB,QAAS,EAA5C,CAAvB;AACAf,MAAAA,QAAQ,CAACgB,QAAQ,CAACJ,SAAS,CAACb,IAAV,CAAeK,KAAhB,EAAuBS,QAAQ,CAACd,IAAhC,CAAT,CAAR;AACA,KAJD,CAIE,OAAOO,CAAP,EAAU;AACXC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACA;AACD,GARD;AASA,CAVM,C,CAYP;AACA;;AACA,MAAMU,QAAQ,GAAG,CAACZ,KAAD,EAAQD,IAAR,KAAiB;AACjC,SAAO;AACNM,IAAAA,IAAI,EAAEd,KADA;AAENe,IAAAA,OAAO,EAAE;AACRP,MAAAA,IADQ;AAERC,MAAAA;AAFQ;AAFH,GAAP;AAOA,CARD,C,CAUA;AACA;;;AACA,OAAO,MAAMa,MAAM,GAAG,MAAM;AAC3B,SAAO;AACNR,IAAAA,IAAI,EAAEb;AADA,GAAP;AAGA,CAJM,C,CAMP;AACA;;AACA,OAAO,MAAMsB,WAAW,GAAG,CAACH,QAAD,EAAWhB,IAAX,KAAoB;AAC9C,SAAO,MAAOC,QAAP,IAAoB;AAC1B,QAAI;AACH,YAAMmB,QAAQ,GAAG,MAAMzB,KAAK,CAAC0B,KAAN,CAAa,GAAEvB,OAAQ,UAASkB,QAAS,EAAzC,EAA4ChB,IAA5C,CAAvB;AACAC,MAAAA,QAAQ,CAACqB,cAAc,CAACF,QAAQ,CAACpB,IAAV,CAAf,CAAR;AACA,KAHD,CAGE,OAAOO,CAAP,EAAU;AACXC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACA;AACD,GAPD;AAQA,CATM,C,CAWP;AACA;;AACA,MAAMe,cAAc,GAAIlB,IAAD,IAAU;AAChC,SAAO;AACNM,IAAAA,IAAI,EAAE,cADA;AAENC,IAAAA,OAAO,EAAE;AAAEP,MAAAA;AAAF;AAFH,GAAP;AAIA,CALD","sourcesContent":["import axios from \"axios\";\nimport { LOGIN, LOGOUT } from \"../components/actionTypes\";\n\nconst API_URL = \"http://localhost:5000\";\n\n// adds user to database as well as redux state\n// by dispatching action created by registered()\nexport const register = (data) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst resp = await axios.post(`${API_URL}/auth/register`, data);\n\t\t\t// const userResp = await axios.get(`${API_URL}/users/${data.username}`);\n\t\t\tconst { user, token } = resp.data;\n\t\t\tdispatch(registered(token, user));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\n// returns action to be dispatched containing information on the\n// newly registered user\nconst registered = (token, user) => {\n\treturn {\n\t\ttype: LOGIN,\n\t\tpayload: {\n\t\t\tuser,\n\t\t\ttoken,\n\t\t},\n\t};\n};\n\n// verifies that username & password from data are valid\n// if valid, adds the user to redux state by dispatching action created by loggedIn()\n// in invalid, throws error\nexport const login = (data) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst tokenResp = await axios.post(`${API_URL}/auth/login`, data);\n\t\t\tconst userResp = await axios.get(`${API_URL}/users/${data.username}`);\n\t\t\tdispatch(loggedIn(tokenResp.data.token, userResp.data));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\n// returns action to be dispatched containing information on the\n// logged in user\nconst loggedIn = (token, user) => {\n\treturn {\n\t\ttype: LOGIN,\n\t\tpayload: {\n\t\t\tuser,\n\t\t\ttoken,\n\t\t},\n\t};\n};\n\n// returns action to be dispatched that ends up removing\n// the user's information from redux state\nexport const logout = () => {\n\treturn {\n\t\ttype: LOGOUT,\n\t};\n};\n\n// edits the information on a given user in the database\n// as well as redux state by dispatching action created by edittedProfile()\nexport const editProfile = (username, data) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst editResp = await axios.patch(`${API_URL}/users/${username}`, data);\n\t\t\tdispatch(edittedProfile(editResp.data));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\n// returns action to be dispatched containing information on the\n// logged in user\nconst edittedProfile = (user) => {\n\treturn {\n\t\ttype: \"EDIT_PROFILE\",\n\t\tpayload: { user },\n\t};\n};\n"]},"metadata":{},"sourceType":"module"}