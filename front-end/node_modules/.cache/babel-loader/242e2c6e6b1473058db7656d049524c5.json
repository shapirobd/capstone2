{"ast":null,"code":"import axios from \"axios\";\nimport { LOAD_FEED, LOAD_RECIPE, FILTER_FEED, FILTER_BY_INGREDIENTS } from \"../components/actionTypes\";\nimport createMacrosParams from \"../helpers/createMacrosParams\";\nexport const loadFeed = page => {\n  return async dispatch => {\n    try {\n      const recipes = await axios.get(\"https://api.spoonacular.com/recipes/complexSearch\", {\n        params: {\n          apiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n          offset: 40 * (page - 1),\n          number: 40\n        }\n      });\n      console.log(recipes.data);\n      dispatch(loadedFeed(recipes.data, page));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n};\n\nconst loadedFeed = (data, page) => {\n  return {\n    type: LOAD_FEED,\n    payload: {\n      recipes: data.results,\n      totalResults: data.totalResults,\n      page\n    }\n  };\n};\n\nexport const loadRecipe = recipeId => {\n  console.log(\"2: \", recipeId);\n  return async dispatch => {\n    try {\n      const recipe = await axios.get(`https://api.spoonacular.com/recipes/${recipeId}/information`, {\n        params: {\n          apiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n          includeNutrition: true\n        }\n      });\n      const instructions = await axios.get(`https://api.spoonacular.com/recipes/${recipeId}/analyzedInstructions`, {\n        params: {\n          apiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n          stepBreakdown: true\n        }\n      });\n      dispatch(loadedRecipe(recipe.data, instructions.data[0]));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n};\n\nconst loadedRecipe = (recipe, instructions) => {\n  return {\n    type: LOAD_RECIPE,\n    payload: {\n      currentRecipe: {\n        recipe,\n        instructions\n      }\n    }\n  };\n};\n\nexport const filterFeed = filterData => {\n  return async dispatch => {\n    try {\n      const {\n        diets,\n        macros\n      } = filterData;\n      const macrosParams = createMacrosParams(macros);\n      const dietsParams = diets.join(\",\");\n      console.log(macrosParams);\n      const recipes = await axios.get(\"https://api.spoonacular.com/recipes/complexSearch\", {\n        params: {\n          apiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n          offset: 0,\n          number: 40,\n          diet: dietsParams,\n          ...macrosParams\n        }\n      });\n      console.log(recipes.data);\n      dispatch(filteredFeed(recipes.data));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n};\n\nconst filteredFeed = data => {\n  return {\n    type: FILTER_FEED,\n    payload: {\n      recipes: data.results,\n      totalResults: data.totalResults\n    }\n  };\n};\n\nexport const getRecipesByIngredients = ingredients => {\n  return async dispatch => {\n    try {\n      const ingredientsParams = ingredients.join(\",\");\n      const recipes = await axios.get(\"https://api.spoonacular.com/recipes/findByIngredients\", {\n        params: {\n          apiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n          offset: 0,\n          number: 40,\n          ingredients: ingredientsParams\n        }\n      });\n      console.log(recipes.data);\n      dispatch(gotRecipesByIngredients(recipes.data));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n};\n\nconst gotRecipesByIngredients = results => {\n  return {\n    type: FILTER_BY_INGREDIENTS,\n    payload: results\n  };\n};","map":{"version":3,"sources":["/Users/briand.shapiro/Desktop/Springboard/capstone2/front-end/src/actionCreators/recipeActionCreators.js"],"names":["axios","LOAD_FEED","LOAD_RECIPE","FILTER_FEED","FILTER_BY_INGREDIENTS","createMacrosParams","loadFeed","page","dispatch","recipes","get","params","apiKey","offset","number","console","log","data","loadedFeed","e","error","type","payload","results","totalResults","loadRecipe","recipeId","recipe","includeNutrition","instructions","stepBreakdown","loadedRecipe","currentRecipe","filterFeed","filterData","diets","macros","macrosParams","dietsParams","join","diet","filteredFeed","getRecipesByIngredients","ingredients","ingredientsParams","gotRecipesByIngredients"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {\n\tLOAD_FEED,\n\tLOAD_RECIPE,\n\tFILTER_FEED,\n\tFILTER_BY_INGREDIENTS,\n} from \"../components/actionTypes\";\nimport createMacrosParams from \"../helpers/createMacrosParams\";\n\nexport const loadFeed = (page) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst recipes = await axios.get(\n\t\t\t\t\"https://api.spoonacular.com/recipes/complexSearch\",\n\t\t\t\t{\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tapiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n\t\t\t\t\t\toffset: 40 * (page - 1),\n\t\t\t\t\t\tnumber: 40,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tconsole.log(recipes.data);\n\t\t\tdispatch(loadedFeed(recipes.data, page));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\nconst loadedFeed = (data, page) => {\n\treturn {\n\t\ttype: LOAD_FEED,\n\t\tpayload: { recipes: data.results, totalResults: data.totalResults, page },\n\t};\n};\n\nexport const loadRecipe = (recipeId) => {\n\tconsole.log(\"2: \", recipeId);\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst recipe = await axios.get(\n\t\t\t\t`https://api.spoonacular.com/recipes/${recipeId}/information`,\n\t\t\t\t{\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tapiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n\t\t\t\t\t\tincludeNutrition: true,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst instructions = await axios.get(\n\t\t\t\t`https://api.spoonacular.com/recipes/${recipeId}/analyzedInstructions`,\n\t\t\t\t{\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tapiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n\t\t\t\t\t\tstepBreakdown: true,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tdispatch(loadedRecipe(recipe.data, instructions.data[0]));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\nconst loadedRecipe = (recipe, instructions) => {\n\treturn {\n\t\ttype: LOAD_RECIPE,\n\t\tpayload: { currentRecipe: { recipe, instructions } },\n\t};\n};\n\nexport const filterFeed = (filterData) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst { diets, macros } = filterData;\n\t\t\tconst macrosParams = createMacrosParams(macros);\n\t\t\tconst dietsParams = diets.join(\",\");\n\t\t\tconsole.log(macrosParams);\n\t\t\tconst recipes = await axios.get(\n\t\t\t\t\"https://api.spoonacular.com/recipes/complexSearch\",\n\t\t\t\t{\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tapiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\tnumber: 40,\n\t\t\t\t\t\tdiet: dietsParams,\n\t\t\t\t\t\t...macrosParams,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tconsole.log(recipes.data);\n\t\t\tdispatch(filteredFeed(recipes.data));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\nconst filteredFeed = (data) => {\n\treturn {\n\t\ttype: FILTER_FEED,\n\t\tpayload: { recipes: data.results, totalResults: data.totalResults },\n\t};\n};\n\nexport const getRecipesByIngredients = (ingredients) => {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst ingredientsParams = ingredients.join(\",\");\n\t\t\tconst recipes = await axios.get(\n\t\t\t\t\"https://api.spoonacular.com/recipes/findByIngredients\",\n\t\t\t\t{\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tapiKey: \"73baf9bb95a14f5fb4d71e2f12ab8479\",\n\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\tnumber: 40,\n\t\t\t\t\t\tingredients: ingredientsParams,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\t\t\tconsole.log(recipes.data);\n\t\t\tdispatch(gotRecipesByIngredients(recipes.data));\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t};\n};\n\nconst gotRecipesByIngredients = (results) => {\n\treturn {\n\t\ttype: FILTER_BY_INGREDIENTS,\n\t\tpayload: results,\n\t};\n};\n"]},"metadata":{},"sourceType":"module"}